webpackJsonp([1],{R1Qy:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("4YfN"),n=s.n(a),l=s("kciL"),i=s("D/cR"),r=s("BGi1"),o={props:["obj"],components:{},data:function(){return{user:{name:"",pass:"",email:"",tel:"",sex:"",idx:"",des:"",time:""},confirm:""}},methods:n()({},Object(l.b)({requestFindUserAction:"user/requestFindUserAction",changeIsRequestAction:"user/changeIsRequestAction"}),{cancel:function(){this.obj.isAdd||this.empty(),this.obj.showDialog=!1},empty:function(){this.user={name:"",pass:"",email:"",tel:"",sex:"",idx:"",des:"",time:""},this.confirm=""},add:function(){var e,t,s=this;this.user.pass===this.confirm?(e=this.user.tel,/^1[3456789]\d{9}$/g.test(e)?(t=this.user.idx,/^[1-9]\d{5}(18|19|20|(3\d))\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/g.test(t)?(this.user.time=new Date(this.user.time).getTime(),Object(i.d)(this.user).then(function(e){e&&(Object(r.b)(e.data.info),s.empty(),s.cancel(),s.changeIsRequestAction(!0),s.requestFindUserAction())})):Object(r.c)("身份证号格式不正确")):Object(r.c)("手机号格式不正确")):Object(r.c)("两次密码不一致")},find:function(e){var t=this;Object(i.m)({id:e}).then(function(e){e&&(t.user=e.data.data[0],t.user.time=new Date(parseInt(t.user.time)),delete t.user._id)})},update:function(){var e=this;this.user.time=new Date(this.user.time).getTime(),Object(i.r)(this.user).then(function(t){t&&(Object(r.b)(t.data.info),e.empty(),e.cancel(),e.changeIsRequestAction(!0),e.requestFindUserAction())})}})},c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:e.obj.isAdd?"新增用户":"修改用户",visible:e.obj.showDialog},on:{"update:visible":function(t){return e.$set(e.obj,"showDialog",t)}}},[s("el-row",[s("el-col",{attrs:{span:4}},[e._v("账号")]),e._v(" "),s("el-col",{attrs:{span:20}},[s("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:4}},[e._v("密码")]),e._v(" "),s("el-col",{attrs:{span:20}},[s("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.user.pass,callback:function(t){e.$set(e.user,"pass",t)},expression:"user.pass"}})],1)],1),e._v(" "),e.obj.isAdd?s("el-row",[s("el-col",{attrs:{span:4}},[e._v("确认密码")]),e._v(" "),s("el-col",{attrs:{span:20}},[s("el-input",{attrs:{placeholder:"请输入确认密码","show-password":""},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}})],1)],1):e._e(),e._v(" "),s("el-row",[s("el-col",{attrs:{span:4}},[e._v("邮箱")]),e._v(" "),s("el-col",{attrs:{span:20}},[s("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:4}},[e._v("电话")]),e._v(" "),s("el-col",{attrs:{span:20}},[s("el-input",{attrs:{placeholder:"请输入电话"},model:{value:e.user.tel,callback:function(t){e.$set(e.user,"tel",t)},expression:"user.tel"}})],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:4}},[e._v("性别")]),e._v(" "),s("el-col",{attrs:{span:20}},[s("el-radio",{attrs:{label:"男",disabled:!e.obj.isAdd},model:{value:e.user.sex,callback:function(t){e.$set(e.user,"sex",t)},expression:"user.sex"}},[e._v("男")]),e._v(" "),s("el-radio",{attrs:{label:"女",disabled:!e.obj.isAdd},model:{value:e.user.sex,callback:function(t){e.$set(e.user,"sex",t)},expression:"user.sex"}},[e._v("女")])],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:4}},[e._v("身份证号")]),e._v(" "),s("el-col",{attrs:{span:20}},[s("el-input",{attrs:{placeholder:"请输入身份证号",disabled:!e.obj.isAdd},model:{value:e.user.idx,callback:function(t){e.$set(e.user,"idx",t)},expression:"user.idx"}})],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:4}},[e._v("备注")]),e._v(" "),s("el-col",{attrs:{span:20}},[s("el-input",{attrs:{placeholder:"请输入备注"},model:{value:e.user.des,callback:function(t){e.$set(e.user,"des",t)},expression:"user.des"}})],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:4}},[e._v("生日")]),e._v(" "),s("el-col",{attrs:{span:20}},[s("el-date-picker",{attrs:{type:"date",disabled:!e.obj.isAdd},model:{value:e.user.time,callback:function(t){e.$set(e.user,"time",t)},expression:"user.time"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer text-center",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"btn-info",on:{click:function(t){return e.cancel()}}},[e._v("取 消")]),e._v(" "),e.obj.isAdd?s("el-button",{staticClass:"btn-default",attrs:{type:"primary"},on:{click:e.add}},[e._v("添 加")]):s("el-button",{staticClass:"btn-default",attrs:{type:"primary"},on:{click:e.update}},[e._v("修 改")])],1)],1)],1)},staticRenderFns:[]};var u=s("C7Lr")(o,c,!1,function(e){s("b6/Q")},"data-v-e4311410",null).exports,d={computed:n()({},Object(l.c)({list:"user/list"})),data:function(){return{obj:{showDialog:!1,isAdd:!0}}},methods:n()({},Object(l.b)({requestFindUserAction:"user/requestFindUserAction",changeIsRequestAction:"user/changeIsRequestAction"}),{willAdd:function(){this.obj.showDialog=!0,this.obj.isAdd=!0},look:function(e){this.obj.showDialog=!0,this.obj.isAdd=!1,this.$refs.add.find(e)},del:function(e){var t=this;Object(i.h)(e).then(function(e){e&&(Object(r.b)(e.data.info),t.changeIsRequestAction(!0),t.requestFindUserAction())})}}),mounted:function(){this.requestFindUserAction()},components:{addUser:u},beforeRouteEnter:function(e,t,s){var a=localStorage.getItem("type");"0"==a||"1"==a?s():s("/index/welcome")}},p={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("add-btn",{nativeOn:{click:function(t){return e.willAdd(t)}}}),e._v(" "),s("div",{staticClass:"table-wrapper"},[s("el-table",{staticClass:"table",attrs:{data:e.list,border:"",stripe:"",height:"400"}},[s("el-table-column",{attrs:{prop:"name",label:"账号"}}),e._v(" "),s("el-table-column",{attrs:{prop:"tel",label:"电话"}}),e._v(" "),s("el-table-column",{attrs:{prop:"idx",label:"身份号"}}),e._v(" "),s("el-table-column",{attrs:{label:"生日"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[e._v(e._s(e._f("timeFilter")(t.row.time)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[s("el-button",{staticClass:"btn-black",attrs:{type:"primary"},on:{click:function(s){return e.look(t.row.id)}}},[e._v("查看")]),e._v(" "),s("del-btn",{attrs:{id:t.row.id},on:{del:function(t){return e.del(e.id)}}})],1)]}}])})],1)],1),e._v(" "),s("add-user",{ref:"add",attrs:{obj:e.obj}})],1)},staticRenderFns:[]};var b=s("C7Lr")(d,p,!1,function(e){s("XHAJ")},"data-v-6fd681ce",null);t.default=b.exports},XHAJ:function(e,t){},"b6/Q":function(e,t){}});
//# sourceMappingURL=1.9d6683a6f5d15ff09ea7.js.map